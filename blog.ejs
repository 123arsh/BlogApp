<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/head.ejs') %>
    <title>Blog</title>
</head>
<body>
    <%- include('./partials/nav') %>
        <div class="container mt-4">
            <h1><%= blog.title %></h1>
            <img src="<%= blog.coverImageURL %>" alt="ERROR 404!" width="250px">
            <p class="mt-2"><%= blog.body %></p>
        </div>

        <div class="container mt-2">
            <span class="container mt-5" style="display: flex; height: 55px;">
                <img src="<%= blog.createdBy.profileImageURL %>" alt="Error 404!" style="width:40px; height: 40px; border-radius:20px;">
                <h3 width="10px" style="margin-left: 10px;"><%= blog.createdBy.fullName %></h3>
            </span>
            <p width="8px"> <%= blog.createdBy.createdAt %> </p>
        </div>

        <div class="container mt-2">
        <h1>Comment (<%= comments.length %>)</h1>
        <% if (locals.user) { %>
                <form action="/blog/comment/<%= blog._id %>" method="post">
                    <div class="mb-3">
                      <input type="text" class="form-control" name="content" placeholder="Enter your Comment">
                      <button class="btn btn-primary mt-3" type="submit">Add</button>
                    </div>
                  </form>

                  <div class="mt-3">
                    <% comments.forEach(comment => { %>
                        <div>
                            <img src="<%= comment.createdBy.profileImageURL %>" alt="Error 404!" style="width:35px; height: 35px; border-radius:20px;"><%= comment.createdBy.fullName %>
                            <pre> <%= comment.content %></pre>
                        </div>
                    <% }) %>
                  </div>
        <% } %>
    </div>
    <%- include('./partials/script.ejs') %>
</body> 
</html>